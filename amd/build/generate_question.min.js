define("qbank_generatequestion/generate_question",["exports","./selectors","local_ai_manager/make_request","core/str"],(function(_exports,_selectors,_make_request,_str){var obj;
/**
   * qbank_generatequestion generation module.
   *
   * @copyright  ISB Bayern, 2024
   * @author     Dr. Peter Mayer
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_selectors=(obj=_selectors)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{const submitbtn=document.getElementById("qbank_qgen_start");if(submitbtn){submitbtn.addEventListener("click",generateQuestion);for(var guidequstions=document.getElementsByClassName("qbank_generatequestion_guidequestions"),i=0;i<guidequstions.length;i++)guidequstions[i].addEventListener("change",generatePrompt,!1)}};const generateQuestion=async()=>{document.getElementById(_selectors.default.elements.divresults).classList.remove("hidden");var waitString=await(0,_str.getString)("wait_for_result","qbank_generatequestion").then((string=>string)).catch();document.getElementById(_selectors.default.elements.taResult).value=waitString;var prompt=document.getElementById(_selectors.default.elements.taPrompt).value;retrieveResult("chat",prompt,[]).then((requestresult=>{requestresult.string,document.getElementById(_selectors.default.elements.taResult).value=requestresult.result}))},retrieveResult=async function(purpose,prompt){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const defaultprompt=await(0,_str.getString)("defaultprompt","qbank_generatequestion").then((defaultprompt=>defaultprompt)),defaultpromtPostfix=await(0,_str.getString)("defaultpromt_postfix","qbank_generatequestion").then((defaultpromtPostfix=>defaultpromtPostfix));prompt=defaultprompt+" "+prompt+" "+defaultpromtPostfix,window.console.log(prompt);let result=await(0,_make_request.makeRequest)(purpose,prompt,JSON.stringify(options));return result},generatePrompt=async()=>{const qtypehortname=document.getElementById(_selectors.default.elements.qtypeshortname).value;var qtypeWrapperPrompt=await(0,_str.getString)("qtype_wrapperprompt","qbank_generatequestion","qtype_"+qtypehortname).then((string=>string)).catch();qtypeWrapperPrompt=qtypeWrapperPrompt+" "+await(0,_str.getString)("qtype_"+qtypehortname+"_special_prompt","qbank_generatequestion","qtype_"+qtypehortname).then((string=>string)).catch();var matheqdefaultprompt="";1==document.getElementById(_selectors.default.elements.mathequation).value&&(matheqdefaultprompt=await(0,_str.getString)("defaultprompt_math","qbank_generatequestion").then((string=>string)).catch());const qTitle=document.getElementById(_selectors.default.elements.qtitle).value,question=document.getElementById(_selectors.default.elements.question).value,questionPrompt=await(0,_str.getString)("question_wrapperprompt","qbank_generatequestion",question).then((string=>string)).catch();var prompt=qtypeWrapperPrompt+" "+matheqdefaultprompt+" "+await(0,_str.getString)("question_title_wrapperprompt","qbank_generatequestion",qTitle).then((string=>string)).catch()+" "+questionPrompt;document.getElementById(_selectors.default.elements.taPrompt).value=prompt}}));

//# sourceMappingURL=generate_question.min.js.map